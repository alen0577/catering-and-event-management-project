{% extends 'user/base.html' %}

{% block title %}
Cart
{% endblock title %}


{% block body %}
{% load static %}


<style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      font-size: 16px;
      line-height: 1.5;
    }
  
    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: 200px;
      height: 100%;
      background-color:rgb(5, 12, 69);
      overflow-x: hidden;
      padding-top: 20px;
    }
  
    .main-content {
      margin-left: 200px;
      padding: 20px;
    }
  
    .menu-item {
      list-style: none;
      padding: 10px;
      border-bottom: 1px solid #040404;
    }
  
    .menu-item a {
      text-decoration: none;
      color: #ffffff;
    }
  
    .menu-item a:hover {
      color: #000;
    }
  
    .toggle-btn {
      display: none;
    }
  
    @media screen and (max-width: 768px) {
      .sidebar {
        width: 100%;
        height: auto;
        position: relative;
      }
  
      .toggle-btn {
        display: block;
        position: absolute;
        top: 10px;
        right: 10px;
      }
  
      .main-content {
        margin-left: 0;
      }
    }
  </style>
  
  
  <div class="sidebar">
    <button class="toggle-btn"></button>
    <ul>
      <li class="menu-item"><a href="{% url 'userhome' %}"><img src="{% static 'images/logo.png' %}" style="height: 100px;width: 100px;"></a></li>
      <li class="menu-item"><a href="{% url 'userhome' %}">Home</a></li>
      <!-- <li class="menu-item"><a href="#section3">Food Items</a></li> -->
      <li class="menu-item"><a  data-bs-toggle="modal" data-bs-target="#eventmodal" href="#">Book Events</a></li>
      <li class="menu-item"><a href="{% url 'bookinglist' %}">Booking Status</a></li>
      <li class="menu-item"><a href="{% url 'profile' %}">Profile</a></li>
      <li class="menu-item"><a href="{% url 'cart' %}">Cart</a></li>
      {% if user.is_authenticated %}
      <li class="menu-item"><a href="{% url 'logout' %}">Logout</a></li>
      {% else %}
      <li class="menu-item"><a data-bs-toggle="modal" data-bs-target="#loginmodal" href="">Login</a></li>
      <li class="menu-item"><a data-bs-toggle="modal" data-bs-target="#registrationmodal" href="">Register</a></li>
      {% endif %}
    </ul>
  </div>
  
  
  
  <div class="main-content">


    <section>


        <div class="container mt-5" >
            <h3 class="alert  text-center mb-5" style="margin-top: 50px; background-color: rgb(255, 255, 255);color: rgb(5, 12, 69);">
                CART DETAILS
            </h3>
            <div class="row">
                <div class="col-sm-10">
                    <table class="table table-hover text-center " style="background-color: rgb(171, 180, 180);color: rgb(5, 12, 69);">
                        <thead>
                            <tr>
                                <th>NAME</th>
                                <th>PRICE</th>
                                <th>CATEGORY</th>
                                <th>IMAGE</th>
                                <th>QTY</th>
                                <th>ACTION</th>
                                
                                
                            </tr>
                        </thead>
                        {% for p in cartitems %}
                        <tbody>
                            
                            <tr>
                                <td>{{ p.product.pname}}</td>
                                <td>{{ p.product.pprice}}/-</td>
                                <td>{{ p.product.pcat.category_name}}</td>  
                                <td>
                                    {% if p.product.pimg %}
                                    <img src="{{ p.product.pimg.url }}" alt="" style="width: 150px;height: 100px;">
                                    {% endif %}
                                </td>
                                <td>{{ p.quantity}}</td>
                                   
                                <td>
                                    <!-- <a href="#"><button>Buy Now</button></a> -->
                                    <a href="{% url 'deleteitem' p.id %}"><button>Delete</button></a>
                                </td>
                                
                            </tr>
                            
                        </tbody> 
                        {% endfor %}
                </div>
            </div>
            
        </div>
        {% if cartitems %}
        <div class="container">
            <div class="row">
                
                <div class="col-12">
                    <a href="{% url 'checkout' %}"><button type="submit"  class="btn btn-lg" style="margin-bottom: 20px;background-color: rgb(5, 12, 69);color: white;">Buy Now</button>
                    </a>
                   
                </div>
            </div>
        </div>
        {% endif %}
        

    </section>

    {% include 'user/eventbooking.html' %}

  
  
    
  </div>
  







<style>
.table{
    width: 120%;
}
</style>


{% for message in messages %}
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.4.js" integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E=" crossorigin="anonymous"></script>

  {% if message.tags == 'info' %}
  <script>
    var m="{{message}}";
    swal("Success!",m, "info")
  </script>

  <!-- modal show -->
  <!-- <script>
      $(document).ready(function() {
          $("#loginmodal").modal('show');
      });
  </script> -->
  

  {% elif message.tags == 'error' %}
  <script>
    var m="{{message}}";
    swal("Success..!",m, "error")
  </script>

  {% elif message.tags == 'success' %}
  
  <script>
    var m="{{message}}";
    swal("Success..!",m, "success")
  </script>

  {% else %}
  <script>
    var m="{{message}}";
    swal("Deleted...!",m, "warning")
  </script>
  

  {% endif %}


{% endfor %}
<script>
  var toggleBtn = document.querySelector('.toggle-btn');
  var sidebar = document.querySelector('.sidebar');

  toggleBtn.addEventListener('click', function() {
    sidebar.classList.toggle('active');
  });
</script>




{% endblock %}